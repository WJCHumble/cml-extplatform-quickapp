<template>
<view>
    <view><text>a: {{a}}---</text></view>
    <view><text>compA: {{compA}}----</text></view>
    <view><text>login.phone: {{login.phone}}---</text></view>
    <view><text>message: {{message}}---</text></view>
    <input placeholder="input content" value="" c-bind:input="change"></input>
</view>
</template>

<script>
import store from '../../store'
const { mapState, mapMutations, mapActions, mapGetters } = store

  class Home {
    data = {
      a: 'default a',
      title: ''
    }

    computed = {
      ...mapState(['login']),
      compA() {
        return this.a + ' computed'
      },
      message() {
        return this.title + '#######'
      }
    }

    watch  = {
      login(n, o) {
        console.log('login change:', n)
      },
      title() {
        console.log('##### title change', [].slice.call(arguments))
      },
      a() {
         console.log('##### a change', [].slice.call(arguments))
      }
    }
    methods = {
      ...mapMutations(['changeLogin']),
      change(e) {
        this.title = e.detail.value
      }
    }
    mounted() {
      this.$watch('login', function(v) {
        console.log('this.$watch login changeï¼š', v)
      })

      this.a = "change a "

      setTimeout(() => {
        console.log('-------- store.login', store.state.login)
        console.log('-------- this.login', this.login)

        this.changeLogin({
          phone: '12132'
        })

        console.log('--------- after store.login', store.state.login)
        console.log('--------- after this.login', this.login)
        
      }, 2000)
    }
  }
  export default new Home();
</script>

<style scoped>
  
</style>


<script cml-type="json">
  {
    "base": {
      "usingComponents": {},
      "navigationBarTitleText": "Chameleon Demos",
      "backgroundTextStyle": "dark",
      "backgroundColor": "#F0F2F7"
    }
  }
</script>